function pwaforwpGetParamByName(e,a){a||(a=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}jQuery(document).ready((function(e){jQuery(".pwaforwp-colorpicker").wpColorPicker(),jQuery(".pwaforwp-fcm-push-icon-upload").click((function(e){e.preventDefault();var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();jQuery(".pwaforwp-fcm-push-icon").val(e.url)})).open()})),jQuery(".pwaforwp-fcm-push-budge-icon-upload").click((function(e){e.preventDefault();var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();jQuery(".pwaforwp-fcm-push-budge-icon").val(e.url)})).open()})),jQuery(".pwaforwp-icon-upload").click((function(e){e.preventDefault();var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();jQuery(".pwaforwp-icon").val(e.url)})).open()})),jQuery(".pwaforwp-monochrome-upload").click((function(e){e.preventDefault();var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();jQuery(".pwaforwp-monochrome").val(e.url)})).open()})),jQuery(".pwaforwp-screenshots-upload").click((function(e){e.preventDefault(),this__=jQuery(this).parents(".js_clone_div");var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();this__.find(".pwaforwp-screenshots").val(e.url)})).open()})),jQuery(".pwaforwp-splash-icon-upload").click((function(e){e.preventDefault();var a=wp.media({title:pwaforwp_obj.splash_uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();jQuery(".pwaforwp-splash-icon").val(e.url)})).open()})),jQuery(".pwaforwp-tabs a").click((function(e){e.preventDefault();var a=jQuery(this).attr("href"),t=pwaforwpGetParamByName("tab",a);if(t||(t="dashboard"),jQuery(this).siblings().removeClass("nav-tab-active"),jQuery(this).addClass("nav-tab-active"),"premium_features"!=t||"yes"!=jQuery(this).attr("data-extmgr"))return jQuery(".form-wrap").find(".pwaforwp-"+t).siblings().hide(),jQuery(".form-wrap .pwaforwp-"+t).show(),window.history.pushState("","",a),"help"==t||"features"==t?(jQuery(".pwaforwp-help").find("tr th:first").hide(),jQuery(".pwaforwp-settings-form").find("p.submit").hide()):jQuery(".pwaforwp-settings-form").find("p.submit").show(),!1;window.location.href="admin.php?page=pwawp-extension-manager"}));var a=pwaforwpGetParamByName("tab",window.location.href);"help"!=a&&"features"!=a||(jQuery(".pwaforwp-help").find("tr th:first").hide(),jQuery(".pwaforwp-settings-form").find("p.submit").hide()),jQuery(".pwaforwp-activate-service").on("click",(function(e){jQuery(".pwaforwp-settings-form #submit").click(),jQuery(this).hide()})),jQuery(".pwaforwp-service-activate").on("click",(function(){var e=jQuery(this).attr("data-id");return e&&jQuery.ajax({url:ajaxurl,dataType:"json",data:{filetype:e,action:"pwaforwp_download_setup_files",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(a){"t"==a.status?(jQuery(".pwaforwp-service-activate[data-id="+e+"]").hide(),jQuery(".pwaforwp-service-activate[data-id="+e+"]").siblings(".dashicons").removeClass("dashicons-no-alt"),jQuery(".pwaforwp-service-activate[data-id="+e+"]").siblings(".dashicons").addClass("dashicons-yes"),jQuery(".pwaforwp-service-activate[data-id="+e+"]").siblings(".dashicons").css("color","#46b450")):jQuery(".pwaforwp-service-activate[data-id="+e+"]").parent().next().removeClass("pwaforwp-hide")}}),!1})),jQuery(".pwa-send-query").on("click",(function(e){e.preventDefault();var a=jQuery("#pwaforwp_query_message").val(),t=jQuery("#pwaforwp_query_customer").val();""!=jQuery.trim(a)&&t?jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_send_query_message",customer_type:t,message:a,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){"t"==e.status?(jQuery(".pwa-query-success").show(),jQuery(".pwa-query-error").hide()):(jQuery(".pwa-query-success").hide(),jQuery(".pwa-query-error").show())},error:function(e){console.log(e)}}):""==jQuery.trim(a)&&""==t?alert("Please enter the message and select customer type"):(""==t&&alert("Select Customer type"),""==jQuery.trim(a)&&alert("Please enter the message"))})),jQuery(document).on("click",".pwaforwp-reset-settings",(function(e){e.preventDefault(),1==confirm("Are you sure?")&&jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_reset_all_settings",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){setTimeout((function(){location.reload()}),1e3)},error:function(e){console.log(e)}})})),jQuery(".pwaforwp-manual-notification").on("click",(function(e){e.preventDefault();var a=jQuery("#pwaforwp_notification_message").val(),t=jQuery("#pwaforwp_notification_message_title").val(),r=jQuery("#pwaforwp_notification_message_url").val(),n=jQuery("#pwaforwp_notification_message_image_url").val();""!=jQuery.trim(a)?(jQuery(".pwaforwp-manual-notification").prop("disabled",!0),jQuery(".pwaforwp-manual-notification").text("Sending..."),jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_send_notification_manually",message:a,title:t,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,url:r,image_url:n},success:function(e){if("t"==e.status){var a='<span style="color:green">Success: '+e.success+"</span><br>";jQuery(".pwaforwp-notification-success").show(),jQuery(".pwaforwp-notification-success").html(a),jQuery(".pwaforwp-notification-error").hide(),jQuery(".pwaforwp-manual-notification").prop("disabled",!1),jQuery(".pwaforwp-manual-notification").text("Send")}else{a='<span style="color:red">Failed: '+e.mesg+"</span><br>";jQuery(".pwaforwp-notification-error").html(a),jQuery(".pwaforwp-notification-success").hide(),jQuery(".pwaforwp-notification-error").show(),jQuery(".pwaforwp-manual-notification").prop("disabled",!1),jQuery(".pwaforwp-manual-notification").text("Send")}},error:function(e){console.log(e),jQuery(".pwaforwp-manual-notification").prop("disabled",!1),jQuery(".pwaforwp-manual-notification").text("Send")}})):alert("Please enter the message")})),jQuery("#pwaforwp_settings_utm_setting").click((function(){jQuery(this).prop("checked")?jQuery(".pwawp_utm_values_class").fadeIn():jQuery(".pwawp_utm_values_class").fadeOut(200)})),jQuery("#pwaforwp_settings_precaching_automatic").change((function(){jQuery(this).prop("checked")?(jQuery("#pwaforwp_settings_precaching_post_count").parent().parent().fadeIn(),jQuery(".pwaforwp-pre-cache-table").parent().parent().fadeIn()):(jQuery("#pwaforwp_settings_precaching_post_count").parent().parent().fadeOut(200),jQuery(".pwaforwp-pre-cache-table").parent().parent().fadeOut(200))})).change(),jQuery("#pwaforwp_settings_precaching_manual").change((function(){jQuery(this).prop("checked")?jQuery("#pwaforwp_settings_precaching_urls").parent().parent().parent().fadeIn():jQuery("#pwaforwp_settings_precaching_urls").parent().parent().parent().fadeOut(200)})).change(),jQuery(document).on("click",".pwaforwp-update-pre-caching-urls",(function(e){e.preventDefault();var a=jQuery(this);jQuery.ajax({url:ajaxurl,dataType:"json",data:{action:"pwaforwp_update_pre_caching_urls",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){"t"==e.status?a.parent().parent().hide():alert("Something went wrong")}})})),jQuery("#pwaforwp_precaching_method_selector").change((function(){"automatic"===jQuery(this).val()?(jQuery(".pwaforwp_precaching_table tr").eq(1).fadeIn(),jQuery(".pwaforwp_precaching_table tr").eq(2).fadeOut(200)):(jQuery(".pwaforwp_precaching_table tr").eq(1).fadeOut(200),jQuery(".pwaforwp_precaching_table tr").eq(2).fadeIn())})),jQuery(".pwaforwp-add-to-home-banner-settings").click((function(){jQuery(this).prop("checked")?jQuery(".pwaforwp-enable-on-desktop").removeClass("afw_hide"):(jQuery(".pwaforwp-enable-on-desktop").addClass("afw_hide"),jQuery("#enable_add_to_home_desktop_setting").prop("checked",!1))})),jQuery(".pwaforwp-onesignal-support").click((function(){jQuery(this).prop("checked")?jQuery(".pwaforwp-onesignal-instruction").fadeIn():jQuery(".pwaforwp-onesignal-instruction").fadeOut(200)})),jQuery(".pwawp_utm_values_class").find("input").focusout((function(){jQuery(this).attr("data-val")!==jQuery(this).val()&&jQuery("#pwa-utm_change_track").val("1")})),jQuery(".pwaforwp-fcm-checkbox").click((function(){jQuery(this).prop("checked")?jQuery(this).parent().find("p").removeClass("pwaforwp-hide"):jQuery(this).parent().find("p").addClass("pwaforwp-hide")})),jQuery(".pwaforwp-checkbox-tracker").change((function(e){var a=jQuery(this).attr("data-id"),t=0;jQuery(this).is(":checked")&&(t=jQuery(this).val()),console.log(jQuery(this).parent("label").find("#"+a),t),jQuery(this).parent("label").find('input[name="'+a+'"]').val(t)})),jQuery(document).on("click",".pwaforwp_license_activation",(function(e){e.preventDefault();var a=jQuery(this);a.addClass("updating-message");var t=jQuery(this).attr("license-status"),r=jQuery(this).attr("add-on"),n=jQuery("#"+r+"_addon_license_key").val();t&&r&&n?jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_status_check",license_key:n,license_status:t,add_on:r,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){if(jQuery("#"+r+"_addon_license_key_status").val(e.status),"active"==e.status)jQuery(".saswp-"+r+"-dashicons").addClass("dashicons-yes"),jQuery(".saswp-"+r+"-dashicons").removeClass("dashicons-no-alt"),jQuery(".saswp-"+r+"-dashicons").css("color","green"),jQuery(".pwaforwp_license_activation[add-on='"+r+"']").attr("license-status","inactive"),jQuery("span.addon-inactive_"+r).text("Active"),jQuery("span.addon-inactive_"+r).css("color","green"),jQuery("span.addon-inactive_"+r).removeClass("addon-inactive_"+r).addClass("addon-activated_"+r),jQuery(".pwaforwp_license_activation[add-on='"+r+"']").text("Deactivate"),jQuery(".pwaforwp_license_status_msg[add-on='"+r+"']").text("Activated"),jQuery(".pwaforwp_license_status_msg[add-on='"+r+"']").css("color","green"),jQuery(".pwaforwp_license_status_msg[add-on='"+r+"']").text(e.message);else if("expired"==e.status)jQuery(".addon-inactive_"+r).text("Expired"),jQuery(".addon-inactive_"+r).css("color","red");else{"Invalid license."==e.message&&(jQuery(".addon-inactive_"+r).text("Invalid"),jQuery(".addon-inactive_"+r).css("color","red")),jQuery(".saswp-"+r+"-dashicons").addClass("dashicons-no-alt"),jQuery(".saswp-"+r+"-dashicons").removeClass("dashicons-yes"),jQuery(".saswp-"+r+"-dashicons").css("color","red"),jQuery(".pwaforwp_license_activation[add-on='"+r+"']").attr("license-status","active"),jQuery(".pwaforwp_license_activation[add-on='"+r+"']").text("Activate"),jQuery(".pwaforwp_license_status_msg[add-on='"+r+"']").css("color","red"),jQuery(".pwaforwp_license_status_msg[add-on='"+r+"']").text(e.message),jQuery("span.addon-activated_"+r).text("Inactive"),jQuery("span.addon-activated_"+r).css("color","#bebfc0"),jQuery("span.addon-activated_"+r).removeClass("addon-activated_"+r).addClass("addon-inactive_"+r)}jQuery(".message_addon-inactive_"+r).text(e.message),jQuery(".message_addon-inactive_"+r).css("color","red"),a.removeClass("updating-message")},error:function(e){console.log(e)}}):(alert("Please enter value license key"),a.removeClass("updating-message"))})),jQuery(document).on("click","#user_refresh-",(function(e){e.preventDefault();var a=jQuery(this);document.getElementById("user_refresh").classList.add("spin");var t="active",r=jQuery(this).attr("add-on"),n=jQuery("#"+r+"_addon_license_key").val();t&&r&&n?jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_status_check",license_key:n,license_status:t,add_on:r,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){(jQuery("#"+r+"_addon_license_key_status").val(e.status),"active"==e.status)?(e.days_remaining>7&&(jQuery("span.addon-activated_"+r).text("Active"),jQuery("span.addon-activated_"+r).css("color","green"),jQuery("span.lessthan_0").text("License is"),jQuery("span.lessthan_0").css("color","black"),jQuery("span.expiredinner_span").text("Active"),jQuery("span.expiredinner_span").css("color","green"),jQuery("span.before_msg_active").text("Your license is"),jQuery("span.pwaforwp_addon_icon").css("display","none"),jQuery(".renewal-license").css("display","none")),document.getElementById("user_refresh").classList.remove("spin")):(console.log("Failed"),document.getElementById("user_refresh").classList.remove("spin"));a.removeClass("updating-message")},error:function(e){console.log(e)}}):(alert("Please enter value license key"),a.removeClass("updating-message"))})),jQuery(document).on("click",".pwaforwp_user_refresh_single_addon",(function(e){var a=jQuery(this);e.preventDefault();var t=a.attr("add-on"),r=a.attr("remaining_days_org"),n=jQuery("#"+t+"_addon_license_key").val();document.getElementById("user_refresh_"+t).classList.add("spin");var s=new Date,i=function(e){for(var a=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(a))return n.substring(a.length,n.length)}return null}("pwaforwp_addon_refresh_check");i=new Date(i),console.log("previous_check "+i+" true");var o=-1;if(null!=typeof i){var p=Math.abs(s.getTime()-i.getTime());o=Math.ceil(p/864e5)}var c=new Date(r),u=(p=Math.abs(c.getTime()-s.getTime()),Math.ceil(p/864e5));-1==o||o>1||u<1?(document.cookie="pwaforwp_addon_refresh_check="+s,jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_status_check",license_key:n,license_status:"active",add_on:t,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){jQuery("#"+t+"_addon_license_key_status").val(e.status),document.getElementById("user_refresh_"+t).classList.remove("spin"),a.removeClass("updating-message")},error:function(e){console.log(e)}})):(setTimeout((function(){jQuery(".dashicons").removeClass("spin")}),0),i=Math.abs(i.getDate()+1)+"/"+Math.abs(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds(),alert("Please try after "+i))})),setTimeout((function(){jQuery("#refresh_expired_addon-").trigger("click")}),1e3),jQuery(document).on("click","#refresh_expired_addon-",(function(e){e.preventDefault();var a=jQuery(this);document.getElementById("refresh_expired_addon").classList.add("spin");var t="active",r=jQuery(this).attr("add-on"),n=jQuery("#"+r+"_addon_license_key").val();t&&r&&n?(jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_status_check",license_key:n,license_status:t,add_on:r,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){(jQuery("#"+r+"_addon_license_key_status").val(e.status),"active"==e.status)?(e.days_remaining>0&&(jQuery("span.addon-activated_"+r).text("Active"),jQuery("span.addon-activated_"+r).css("color","green"),jQuery("span.lessthan_0").text("License is"),jQuery("span.lessthan_0").css("color","black"),jQuery("span.expiredinner_span").text("Active"),jQuery("span.expiredinner_span").css("color","green"),jQuery("span.pwaforwp_addon_icon").css("display","none"),jQuery("span.dashicons-warning").css("display","none"),jQuery(".renewal-license").css("display","none")),document.getElementById("refresh_expired_addon").classList.remove("spin")):console.log("Failedd");a.removeClass("updating-message")},error:function(e){console.log(e)}}),jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_transient",license_key:n,license_status:t,add_on:r,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){JSON.parse(e)}})):(alert("Please enter value license key"),a.removeClass("updating-message"))})),setTimeout((function(){jQuery("#auto_refresh-").trigger("click")}),1e3),jQuery(document).on("click","#auto_refresh-",(function(e){var a=document.getElementById("activated-plugins-days_remaining").getAttribute("days_remaining");if(a>=0&&a<=7){e.preventDefault();var t=jQuery(this);document.getElementById("auto_refresh").classList.add("spin");var r="active",n=jQuery(this).attr("add-on"),s=jQuery("#"+n+"_addon_license_key").val();r&&n&&s?(jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_status_check",license_key:s,license_status:r,add_on:n,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){(jQuery("#"+n+"_addon_license_key_status").val(e.status),"active"==e.status)?(e.days_remaining>7&&(jQuery("span.zero_to_seven").text("License is"),jQuery("span.zero_to_seven").css("color","black"),jQuery("span.pwaforwp-addon-alert").css("color","green"),jQuery("span.pwaforwp-addon-alert").text("Active"),jQuery(".renewal-license").css("display","none")),document.getElementById("auto_refresh").classList.remove("spin")):console.log("Failedd");t.removeClass("updating-message")},error:function(e){console.log(e)}}),jQuery.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"pwaforwp_license_transient_zto7",license_key:s,license_status:r,add_on:n,pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce},success:function(e){JSON.parse(e)}})):(alert("Please enter value license key"),t.removeClass("updating-message"))}})),jQuery(".pwaforwp-sub-tab-headings span").click((function(){var e=jQuery(this).attr("data-tab-id");jQuery(this).parents(".pwaforwp-subheading-wrap").find(".pwaforwp-subheading").find("div.selected").removeClass("selected").addClass("pwaforwp-hide"),jQuery(this).parents(".pwaforwp-subheading-wrap").find(".pwaforwp-subheading").find("#"+e).removeClass("pwaforwp-hide").addClass("selected"),jQuery(this).parent(".pwaforwp-sub-tab-headings").find("span.selected").removeClass("selected"),jQuery(this).addClass("selected")})),jQuery(".pwaforwp-checkbox").click((function(){var e=jQuery(this).attr("data-id");console.log(e),jQuery(this).prop("checked")?jQuery(".pwaforwp_"+e).removeClass("pwaforwp-hide"):jQuery(".pwaforwp_"+e).addClass("pwaforwp-hide")})),jQuery(".switch_apple_splash_screen").click((function(){jQuery(this).is(":checked")?jQuery(".pwaforwp-ios-splash-images").show():jQuery(".pwaforwp-ios-splash-images").hide()})),jQuery(".pwaforwp-ios-splash-icon-upload").click((function(e){e.preventDefault();var a=jQuery(this),t=a.parent(".ios-splash-images-field").find("label").text(),r=wp.media({title:t,button:{text:"Select image"},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=r.state().get("selection").first().toJSON();a.parent(".ios-splash-images-field").find(".pwaforwp-splash-icon").val(e.url)})).open()})),jQuery(".pwaforwp-change-data").click((function(e){if(e.preventDefault(),!jQuery(this).parents(".card-action").find("label").find('input[type="checkbox"]').prop("checked"))return!1;var a=jQuery(this).attr("data-option"),t=jQuery(this).attr("title");pwaforwp_showpopup(t,a,".pwaforwp-submit-feature-opt"),datafeatureSubmit(a)})),jQuery('.card-action input[type="checkbox"]').change((function(){var e=0;if(jQuery(this).is(":checked")){jQuery(this).parents(".card-action").find(".card-action-settings").css({opacity:1});e=1}else jQuery(this).parents(".card-action").find(".card-action-settings").css({opacity:0});let a=[];var t=jQuery(this).attr("name");pwaforwp_dependent_features_section(t,e),a.push({var_name:t,var_value:e}),pwaforwp_ajaxcall_submitdata(pwaforwp_obj,a)})),jQuery(document).on("change",".pwaforwp-pn-service",(function(){var e=jQuery(this).val();switch(pushnotificationIntegrationLogic("notification-contents"),e){case"pushnotifications_io":jQuery(".pwaforwp-push-notificatoin-table").hide(),jQuery(".pwaforwp-notification-condition-section").hide(),jQuery(".pwaforwp-pn-recommended-options").show();break;case"fcm_push":jQuery(".pwaforwp-push-notificatoin-table").show(),jQuery(".pwaforwp-notification-condition-section").show(),jQuery(".pwaforwp-pn-recommended-options").hide();break;default:jQuery(".pwaforwp-push-notificatoin-table").hide(),jQuery(".pwaforwp-notification-condition-section").hide(),jQuery(".pwaforwp-pn-recommended-options").hide()}jQuery(".notification-wrap-tb").find(".footer button").trigger("click")})),jQuery(".pwaforwp-install-require-plugin").on("click",(function(e){e.preventDefault();var a=jQuery(this);a.html("Installing..").addClass("updating-message");var t=a.attr("data-secure"),r=(a.attr("data-activate-url"),"");"pushnotification"==a.attr("id")&&(r="&activate=pushnotification"),console.log(wp.updates),jQuery.ajax({url:ajaxurl,type:"post",data:"action=pwafowp_enable_modules_upgread"+r+"&verify_nonce="+t,dataType:"json",success:function(e){if(200==e.status)if(a.hasClass("not-exist"))wp.updates.installPlugin({slug:e.slug,success:function(r){console.log(r.activateUrl),pwaforwp_Activate_Modules_Upgrade(r.activateUrl,a,e,t)}});else{var r=a.attr("data-activate-url");pwaforwp_Activate_Modules_Upgrade(r,a,e,t)}else alert(e.message)}})})),jQuery("#ios-splash-color").wpColorPicker(),jQuery(".pwa_activate_pro_plugin").click((function(){var e=jQuery(this);if(1==e.prop("checked")){var a=e.attr("data-secure"),t=e.attr("data-file");jQuery.ajax({url:ajaxurl,type:"post",data:"action=pwafowp_enable_modules_active&target_file="+t+"&verify_nonce="+a,dataType:"json",success:function(a){200==a.status?(pwaforwp_show_message_toast("success",a.message),location.reload()):(pwaforwp_show_message_toast("error",a.message),e.prop("checked",!1))}})}})),jQuery(".pwaforwp_select_with_other").on("change",(function(e){var a=jQuery(this);"active_url"==a.val()&&(a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dnone")),"other"==a.val()?(a.parent("label").find(".pwaforwp-sub-tab-headings").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-sub-tab-headings").removeClass("pwaforwp_dnone"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dnone")):(a.parent("label").find(".pwaforwp-sub-tab-headings").removeClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-sub-tab-headings").addClass("pwaforwp_dnone"),"active_url"!=a.val()&&(a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dnone")))})),jQuery(".pwaforwp_select_with_other").each((function(e){var a=jQuery(this);"active_url"==a.val()&&(a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dnone")),"other"==a.val()?(a.parent("label").find(".pwaforwp-sub-tab-headings").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-sub-tab-headings").removeClass("pwaforwp_dnone"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dnone")):(a.parent("label").find(".pwaforwp-sub-tab-headings").removeClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-sub-tab-headings").addClass("pwaforwp_dnone"),"active_url"!=a.val()&&(a.parent("label").find(".pwaforwp-upgrade-pro-inline").removeClass("pwaforwp_dinline"),a.parent("label").find(".pwaforwp-upgrade-pro-inline").addClass("pwaforwp_dnone")))}))}));var pushnotificationIntegrationLogic=function(e){if("notification-contents"===e){var a=jQuery(".pwaforwp-pn-service").val();""===a||"pushnotifications_io"===a?jQuery(".notification-wrap-tb").find(".footer").hide():jQuery(".notification-wrap-tb").find(".footer").show()}},datafeatureSubmit=function(e){pushnotificationIntegrationLogic(e),jQuery(".pwaforwp-submit-feature-opt").click((function(e){e.preventDefault();var a=jQuery(this),t=[];a.parents(".thickbox-fetures-wrap").find("input").each((function(e,a){var r=jQuery(this).attr("type").toLowerCase(),n=jQuery(this).attr("name");if("checkbox"==r){if(jQuery(this).is(":checked"))var s=jQuery(this).val();else s=jQuery(this).attr("data-uncheck-val")?jQuery(this).attr("data-uncheck-val"):0;n&&(pwaforwp_dependent_features_section(n,s),t.push({var_name:n,var_value:s}))}if("radio"==r){if(jQuery(this).is(":checked"))s=jQuery(this).val();else s=jQuery(this).attr("data-uncheck-val")?jQuery(this).attr("data-uncheck-val"):0;n&&t.push({var_name:n,var_value:s})}if("checkbox"!=r&&"radio"!=r){s=jQuery(this).val();n&&t.push({var_name:n,var_value:s})}})),a.parents(".thickbox-fetures-wrap").find("textarea").each((function(e,a){var r=jQuery(this).attr("name"),n=jQuery(this).val();r&&t.push({var_name:r,var_value:n})})),a.parents(".thickbox-fetures-wrap").find("select").each((function(e,a){var r=jQuery(this).attr("name"),n=jQuery(this).val();r&&(t.push({var_name:r,var_value:n}),"pwaforwp_settings[notification_options]"===r&&(""!==n?jQuery("#notification-opt-stat").hide():jQuery("#notification-opt-stat").show()))})),pwaforwp_ajaxcall_submitdata(pwaforwp_obj,t)}))};function pwaforwp_ajaxcall_submitdata(e,a){if(!t)var t=!0;if(t){var r={action:"pwaforwp_update_features_options",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,fields_data:a};jQuery.ajax({url:ajaxurl,method:"post",dataType:"json",data:r,success:function(e){t=!1,200==e.status?("pwaforwp_settings[data_analytics]"==a[0].var_name&&location.reload(),pwaforwp_show_message_toast("success",e.message)):pwaforwp_show_message_toast("error",e.message)}})}}function pwaforwp_show_message_toast(e,a){var t="pwaforwp-toast-error";"success"==e&&(t="pwaforwp-toast-success"),jQuery(".pwaforwp-toast-wrap").length&&jQuery(".pwaforwp-toast-wrap").remove();var r='<div class="pwaforwp-toast-wrap bottom-left"><div class="pwaforwp-toast-single '+t+'" style="text-align: left;"><span class="pwaforwp-toast-loader pwaforwp-toast-loaded" style="-webkit-transition: width 2.6s ease-in;                       -o-transition: width 2.6s ease-in;                       transition: width 2.6s ease-in;                       background-color: #9EC600;"></span>'+a+'<span class="close-pwaforwp-toast-single">×</span></div></div>';jQuery("body").append(r),setTimeout((function(){jQuery(".pwaforwp-toast-wrap").remove()}),3e3),jQuery(".close-pwaforwp-toast-single").click((function(){jQuery(this).parents(".pwaforwp-toast-wrap").remove()}))}var pwaforwp_dependent_features_section=function(e,a){switch(e){case"pwaforwp_settings[precaching_feature]":jQuery('input[name="pwaforwp_settings[precaching_automatic]"]').trigger("click"),jQuery('input[name="pwaforwp_settings[precaching_automatic_post]"]').trigger("click");break;case"pwaforwp_settings[precaching_automatic]":1==a?jQuery('input[name="pwaforwp_settings[precaching_feature]"]').prop("checked",!0):(jQuery('input[name="pwaforwp_settings[precaching_feature]"]').prop("checked",!1),jQuery('input[name="pwaforwp_settings[precaching_feature]"]').parents(".card-action").find(".card-action-settings").css({opacity:0}));break;case"pwaforwp_settings[addtohomebanner_feature]":jQuery('input[name="pwaforwp_settings[custom_add_to_home_setting]"]').trigger("click");break;case"pwaforwp_settings[custom_add_to_home_setting]":1==a?jQuery('input[name="pwaforwp_settings[addtohomebanner_feature]"]').prop("checked",!0):(jQuery('input[name="pwaforwp_settings[addtohomebanner_feature]"]').prop("checked",!1),jQuery('input[name="pwaforwp_settings[addtohomebanner_feature]"]').parents(".card-action").find(".card-action-settings").css({opacity:0}));break;case"pwaforwp_settings[loader_feature]":jQuery('input[name="pwaforwp_settings[loading_icon]"]').trigger("click");break;case"pwaforwp_settings[loading_icon]":1==a?jQuery('input[name="pwaforwp_settings[loader_feature]"]').prop("checked",!0):(jQuery('input[name="pwaforwp_settings[loader_feature]"]').prop("checked",!1),jQuery('input[name="pwaforwp_settings[loader_feature]"]').parents(".card-action").find(".card-action-settings").css({opacity:0}));break;case"pwaforwp_settings[utmtracking_feature]":jQuery('input[name="pwaforwp_settings[utm_setting]"]').trigger("click");break;case"pwaforwp_settings[utm_setting]":1==a?jQuery('input[name="pwaforwp_settings[utmtracking_feature]"]').prop("checked",!0):(jQuery('input[name="pwaforwp_settings[utmtracking_feature]"]').prop("checked",!1),jQuery('input[name="pwaforwp_settings[utmtracking_feature]"]').parents(".card-action").find(".card-action-settings").css({opacity:0}))}},pwaforwp_Activate_Modules_Upgrade=function(e,a,t,r){void 0!==e&&e&&(console.log("Activating..."),a.html("Activating..."),jQuery.ajax({async:!0,type:"GET",url:e,success:function(){"pushnotification"==a.attr("id")&&("push notification",console.log("push notification Activated"),a.removeClass("updating-message"),a.removeClass("button"),a.removeClass("pwaforwp-install-require-plugin"),a.unbind("click"),a.html('<a target="_blank" href="'+t.redirect_url+'" style="color:#fff;text-decoration:none;">View Settings</a>'))},error:function(e,a){var t="";t=0===e.status?"Not connect.\n Verify Network.":404===e.status?"Requested page not found. [404]":500===e.status?"Internal Server Error [500].":"parsererror"===a?"Requested JSON parse failed.":"timeout"===a?"Time out error.":"abort"===a?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText,console.log(t)}}))},pwaforwp_showpopup=function(e,a,t){null===e&&(e=""),jQuery(".pwawp-modal-mask").find(".pwawp-popup-title").html(e),jQuery(".pwawp-modal-mask").find(".pwawp-modal-settings").append(jQuery("#"+a).children()),jQuery(".pwawp-modal-mask").attr("data-parent",a),jQuery(".pwawp-modal-mask").attr("data-parent-submit",t),jQuery(".pwawp-modal-mask").find(t).addClass("pwaforwp-hide"),jQuery(".pwawp-modal-mask").removeClass("pwaforwp-hide"),jQuery(".pwawp-modal-mask").find(".pwawp-media-modal-close, .pwawp-close-btn-modal").click((function(){var e=jQuery(this).parents(".pwawp-modal-mask").attr("data-parent");jQuery(this).parents(".pwawp-modal-mask").attr("data-parent-submit");jQuery("#"+e).append(jQuery(".pwawp-modal-mask").find(".pwawp-modal-settings").children()),jQuery(".pwawp-modal-mask").addClass("pwaforwp-hide")})),jQuery(".pwawp-modal-mask").find(".pwawp-save-btn-modal").click((function(e){e.preventDefault();jQuery(this).parents(".pwawp-modal-mask").attr("data-parent");var a=jQuery(this).parents(".pwawp-modal-mask").attr("data-parent-submit");jQuery(".pwawp-modal-mask").find(a).click()}))},optSelection=document.getElementById("ios-splash-gen-opt");if(optSelection.addEventListener("change",onpwaiosOptSelection,!1),"function"==typeof Event){var event=new Event("change");optSelection.dispatchEvent(event)}else onpwaiosOptSelection(optSelection);function onpwaiosOptSelection(e){if(e.target)var a=e.target.value;else a=e.value;if(""==a)return document.getElementById("generate-auto-1").setAttribute("class","panel pwaforwp-hide"),void document.getElementById("manually-1").setAttribute("class","panel pwaforwp-hide");"generate-auto"==a?(document.getElementById(a+"-1").setAttribute("class","panel"),document.getElementById("manually-1").setAttribute("class","panel pwaforwp-hide")):(document.getElementById(a+"-1").setAttribute("class","panel"),document.getElementById("generate-auto-1").setAttribute("class","panel pwaforwp-hide"))}var image="";function onFileUploadChange(e){var a=e.target.files[0],t=new FileReader;t.onload=onFileReaderLoad,t.readAsDataURL(a)}function onFileReaderLoad(e){image=e.target.result,document.getElementById("thumbnail").src=e.target.result}function pwa_getimageZip(e){if(e.disabled=!0,""!=image){var a=document.getElementById("pwa-ios-splashmessage");a.innerHTML="Generating splash screen...",a.setAttribute("class","updating-message");var t=new JSZip,r=t.folder("splashscreens"),n=document.createElement("canvas"),s=n.getContext("2d"),i=new Image;i.src=image,Object.keys(pwaforwp_obj.iosSplashIcon).forEach((function(e,a){var t=pwaforwp_obj.iosSplashIcon[e],o=e.split("x")[0],p=e.split("x")[1];n.width=o,n.height=p;var c=i.width,u=i.height;s.fillStyle=document.getElementById("ios-splash-color").value,s.fillRect(0,0,n.width,n.height),s.drawImage(i,(o-c)/2,(p-u)/2,c,u);var l=n.toDataURL();r.file(t.file,l.split(";base64,")[1],{base64:!0})})),t.generateAsync({type:"blob"}).then((function(e){var t=new XMLHttpRequest;t.open("POST",ajaxurl+"?action=pwaforwp_splashscreen_uploader&pwaforwp_security_nonce="+pwaforwp_obj.pwaforwp_security_nonce),t.send(e),t.onreadystatechange=function(){4===t.readyState&&(200==JSON.parse(t.response).status&&(a.innerHTML="Splash Screen generated",a.setAttribute("class","dashicons dashicons-yes"),a.style.color="#46b450",setTimeout((function(){window.location.reload()}),1e3)))}})),e.disabled=!1}else alert("Please Select Image")}document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("file-upload-ios");e&&e.addEventListener("change",onFileUploadChange,!1)}));var i,accordion=document.getElementsByClassName("accordion");for(i=0;i<accordion.length;i++)accordion[i].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}));function get_include_pages(){var e=jQuery(".visibility_options_select_include").val();jQuery(".pwaforwp-visibility-loader").css("display","flex");var a={action:"pwaforwp_include_visibility_setting_callback",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,include_type:e};jQuery.ajax({url:ajaxurl,type:"post",data:a,success:function(a){var t=jQuery.parseJSON(a);1==t.success&&(jQuery(".visibility_include_select_type").html(t.option),jQuery(".pwaforwp-visibility-loader").css("display","none"),pwa_for_wp_select2(e))}})}function get_exclude_pages(){var e=jQuery(".visibility_options_select_exclude").val();jQuery(".pwaforwp-visibility-loader").css("display","flex");var a={action:"pwaforwp_include_visibility_setting_callback",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,include_type:e};jQuery.ajax({url:ajaxurl,type:"post",data:a,success:function(a){var t=jQuery.parseJSON(a);1==t.success&&(jQuery(".visibility_exclude_select_type").html(t.option),jQuery(".pwaforwp-visibility-loader").css("display","none"),pwa_for_wp_select2_exclude(e))}})}function add_included_condition(){var e=jQuery(".visibility_options_select_include").val(),a=jQuery(".visibility_include_select_type").val();jQuery(".include_error").html("&nbsp;"),jQuery(".include_type_error").html("&nbsp;");var t=!1;if(jQuery(".visibility-include-target-item-list > span").each((function(){var e=jQuery(this).find('input[name="include_targeting_data"]').val();a==e&&(jQuery(".include_type_error").html("Data alredy selected").css("color","red"),t=!0)})),""==e)return jQuery(".include_error").html("Please select visibility type").css("color","red"),setTimeout((function(){jQuery(".include_error").html("&nbsp;")}),5e3),!1;if(""==a)return jQuery(".include_type_error").html("Please select type").css("color","red"),setTimeout((function(){jQuery(".include_type_error").html("&nbsp;")}),5e3),!1;if(0==t){var r={action:"pwaforwp_include_visibility_condition_callback",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,include_targeting_type:e,include_targeting_data:a};jQuery(".pwaforwp-visibility-loader").css("display","flex"),jQuery.ajax({url:ajaxurl,type:"post",data:r,success:function(e){var a=jQuery.parseJSON(e);1==a.success&&(jQuery(".visibility-include-target-item-list").append(a.option),jQuery(".pwaforwp-visibility-loader").css("display","none"),apply_or_condition("visibility-include-target-item-list"))}})}}function add_exclude_condition(){var e=jQuery(".visibility_options_select_exclude").val(),a=jQuery(".visibility_exclude_select_type").val();jQuery(".exclude_error").html("&nbsp;"),jQuery(".exclude_type_error").html("&nbsp;");var t=!1;if(jQuery(".visibility-exclude-target-item-list > span").each((function(){var e=jQuery(this).find('input[name="exclude_targeting_data"]').val();a==e&&(jQuery(".exclude_type_error").html("Data alredy selected").css("color","red"),t=!0)})),""==e)return jQuery(".include_error").html("Please select visibility type").css("color","red"),setTimeout((function(){jQuery(".exclude_error").html("&nbsp;")}),5e3),!1;if(""==a)return jQuery(".exclude_type_error").html("Please select type").css("color","red"),setTimeout((function(){jQuery(".exclude_type_error").html("&nbsp;")}),5e3),!1;if(0==t){var r={action:"pwaforwp_exclude_visibility_condition_callback",pwaforwp_security_nonce:pwaforwp_obj.pwaforwp_security_nonce,exclude_targeting_type:e,exclude_targeting_data:a};jQuery(".pwaforwp-visibility-loader").css("display","flex"),jQuery.ajax({url:ajaxurl,type:"post",data:r,success:function(e){var a=jQuery.parseJSON(e);1==a.success&&(jQuery(".visibility-exclude-target-item-list").append(a.option),jQuery(".pwaforwp-visibility-loader").css("display","none"),apply_or_condition("visibility-exclude-target-item-list"))}})}}function apply_or_condition(e){jQuery("."+e).find(".pwa_visibility_or").remove();var a=jQuery("."+e).children("span").length;a-=1,jQuery("."+e).children("span").each((function(e){e<a&&jQuery(this).append('<b class="pwa_visibility_or">OR</b>')}))}function removeIncluded_visibility(e){jQuery(".pwaforwp-visibility-target-icon-"+e).empty()}function pwa_for_wp_select2(e){var a=jQuery(".pwa_for_wp-select2");a.length>0&&jQuery(a).each((function(a,t){var r=jQuery(this),n=jQuery("option[value]:not([selected])",r),s=[];n.each((function(){var e=jQuery(this);s.push({id:e.attr("value"),text:e.text()})}));var i=ajaxurl+"?action=pwaforwp_get_select2_data&pwaforwp_security_nonce="+pwaforwp_obj.pwaforwp_security_nonce+"&type="+e;r.select2({ajax:{url:i,delay:250,cache:!1},minimumInputLength:2,minimumResultsForSearch:50,dataAdapter:jQuery.fn.select2.amd.require("select2/data/extended-ajax"),defaultResults:s})}))}function pwa_for_wp_select2_exclude(e){var a=jQuery(".pwa_for_wp-select2_exclude");a.length>0&&jQuery(a).each((function(a,t){var r=jQuery(this),n=jQuery("option[value]:not([selected])",r),s=[];n.each((function(){var e=jQuery(this);s.push({id:e.attr("value"),text:e.text()})}));var i=ajaxurl+"?action=pwaforwp_get_select2_data&pwaforwp_security_nonce="+pwaforwp_obj.pwaforwp_security_nonce+"&type="+e;r.select2({ajax:{url:i,delay:250,cache:!1},minimumInputLength:2,minimumResultsForSearch:50,dataAdapter:jQuery.fn.select2.amd.require("select2/data/extended-ajax"),defaultResults:s})}))}function pwaforwp_check_maskable_input(){jQuery(".pwaforwp-maskable-input").each((function(){console.log(jQuery(this).val()),null==jQuery(this).val()||""==jQuery(this).val()?jQuery(this).parents("td").find(".pwaforwp_js_remove_maskable").hide():jQuery(this).parents("td").find(".pwaforwp_js_remove_maskable").show()}))}apply_or_condition("visibility-include-target-item-list"),apply_or_condition("visibility-exclude-target-item-list"),jQuery("body").on("click",".pwaforwp-screenshots-multiple-upload",(function(e){e.preventDefault(),this_=jQuery(this).parents(".js_clone_div");var a=wp.media({title:pwaforwp_obj.uploader_title,button:{text:pwaforwp_obj.uploader_button},multiple:!1,library:{type:"image"}}).on("select",(function(){var e=a.state().get("selection").first().toJSON();this_.find(".pwaforwp-screenshots").val(e.url)})).open()})),jQuery("#screenshots_add_more").click((function(e){e.preventDefault(),clone_tr=jQuery(this).parents(".js_clone_div:first").clone(),clone_tr.find("input").val(""),clone_tr.find("input").prop("name","pwaforwp_settings[screenshots_multiple][]"),clone_tr.find("select").prop("name","pwaforwp_settings[form_factor_multiple][]"),clone_tr.find("select").prop("selectedIndex",0),clone_tr.find("#screenshots_add_more").remove(),clone_tr.find(".js_remove_screenshot").show(),clone_tr.find(".js_choose_button").addClass("pwaforwp-screenshots-multiple-upload"),clone_tr.find(".js_choose_button").removeClass("pwaforwp-screenshots-upload"),clone_tr.insertAfter(".js_clone_div:last")})),jQuery("body").on("click",".js_remove_screenshot",(function(e){e.preventDefault(),jQuery(this).parents(".js_clone_div").remove()})),jQuery("#prefer_related_applications").prop("checked")?jQuery("#related_applications_div").parents("tr").find("th").show():jQuery("#related_applications_div").parents("tr").find("th").hide(),jQuery("body").on("click","#prefer_related_applications",(function(e){jQuery(this).prop("checked")?(jQuery("#related_applications_div").parents("tr").find("th").show(),jQuery("#related_applications_div").show()):(jQuery("#related_applications_div").hide(),jQuery("#related_applications_div").parents("tr").find("th").hide())})),jQuery(".pwaforwp-maskable-icon-upload").click((function(e){e.preventDefault();var a=jQuery(this),t=wp.media({title:"Maskable Icon",button:{text:"Select Icon"},multiple:!1}).on("select",(function(){var e=t.state().get("selection").first().toJSON();a.parents("td").find(".pwaforwp-maskable-input").val(e.url),pwaforwp_check_maskable_input()})).open()})),jQuery(".pwaforwp_js_remove_maskable").click((function(e){e.preventDefault(),jQuery(this).parents("td").find(".pwaforwp-maskable-input").val(""),jQuery(this).hide()})),jQuery(".pwaforwp-maskable-input").keyup((function(){null==jQuery(this).val()||""==jQuery(this).val()?jQuery(this).parents("td").find(".pwaforwp_js_remove_maskable").hide():jQuery(this).parents("td").find(".pwaforwp_js_remove_maskable").show()})),pwaforwp_check_maskable_input();